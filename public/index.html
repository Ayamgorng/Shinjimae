<!DOCTYPE html>
<html>
<head>
    <title>Shinjimae Bot Control</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .config-box { border: 1px solid #ccc; padding: 20px; margin: 20px 0; }
        input[type="number"] { width: 100px; padding: 5px; }
        button { background: #4CAF50; color: white; border: none; padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Shinjimae Bot Control Panel</h1>
    <p id="status">Status: Connecting...</p>
    <p id="count">Deleted Messages: 0</p>
    
    <div class="config-box">
        <h2>Auto Delete Configuration</h2>
        <p>Current Interval: <span id="currentInterval">5</span> minutes</p>
        <input type="number" id="intervalInput" min="1" max="60" value="5">
        <button onclick="updateInterval()">Update Interval</button>
    </div>

    <script>
        function updateUI(data) {
            document.getElementById('status').textContent = 
                `Status: ${data.whatsapp} | Interval: ${data.interval} minutes`;
            document.getElementById('count').textContent = 
                `Deleted Messages: ${data.count}`;
            document.getElementById('currentInterval').textContent = data.interval;
        }

        async function fetchData() {
            try {
                const res = await fetch('/status');
                const data = await res.json();
                updateUI(data);
            } catch (error) {
                console.error('Error:', error);
            }
            setTimeout(fetchData, 2000);
        }

        async function updateInterval() {
            const minutes = document.getElementById('intervalInput').value;
            const response = await fetch('/config/interval', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ minutes })
            });
            alert(response.ok ? 'Interval updated!' : 'Error updating interval');
        }

        fetchData();
    </script>
</body>
</html>
